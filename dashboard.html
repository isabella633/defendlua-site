{% extends 'base.html' %}
{% block content %}
<h2 class="mb-4">Your Protected Code</h2>

{% if codes %}
  <div class="row g-3">
    {% for c in codes %}
      <div class="col-md-6">
        <div class="card border-0 h-100">
          <div class="card-body d-flex flex-column">
            <h6 class="text-secondary">UUID</h6>
            <code class="mb-2">{{ c.uuid }}</code>

            <h6 class="text-secondary">Protected URL</h6>
            <a href="{{ url_for('view_code', uid=c.uuid) }}">{{ url_for('view_code', uid=c.uuid, _external=True) }}</a>

            <h6 class="text-secondary mt-3">Loadstring</h6>
            <code>loadstring(game:HttpGet('{{ url_for('raw_code', uid=c.uuid, _external=True) }}'))()</code>

            <form action="{{ url_for('delete_code', uid=c.uuid) }}" method="POST" class="mt-auto pt-3">
              <button class="btn btn-danger w-100" onclick="return confirm('Delete this code?')">Delete</button>
            </form>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <div class="alert alert-dark border-0">No protected code yet. Go to the home page and add one.</div>
{% endif %}
{% endblock %}
