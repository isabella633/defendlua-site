
{% extends "base.html" %}

{% block title %}ğŸš« Unauthorized Access - balls.lol{% endblock %}

{% block content %}
<div class="card" style="text-align: center; background: rgba(255,0,0,0.1); border-color: rgba(255,0,0,0.3);">
    <div class="warning-icon">ğŸš«</div>
    <h1 style="color: #ff4757; margin-bottom: 20px;">UNAUTHORIZED ACCESS</h1>
    <h2 style="margin-bottom: 30px;">You are not authorized to view this protected code</h2>
    
    <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
        <h3>ğŸ”’ Access Restricted</h3>
        <p style="margin: 15px 0;">This code is protected and can only be viewed by the owner.</p>
        <p style="margin: 15px 0;">Only the IP address that originally protected this code can access it.</p>
        <p style="margin: 15px 0;"><strong>Your IP:</strong> {{ request.environ.get('HTTP_X_FORWARDED_FOR', request.remote_addr) }}</p>
        <p style="margin: 15px 0;"><strong>Access Time:</strong> <span id="currentTime"></span></p>
    </div>
    
    <div style="background: rgba(0,255,0,0.1); border: 1px solid rgba(0,255,0,0.3); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
        <h3>âœ… You Can Still Execute The Code!</h3>
        <p style="margin: 15px 0;">While you can't view the source code, you can still run it using the loadstring URL.</p>
        <p style="margin: 15px 0;">The code owner has allowed execution but restricted source code viewing.</p>
        <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 5px; margin: 15px 0;">
            <code style="color: #00ff00;">loadstring(game:HttpGet('{{ request.url_root }}api/loadstring/{{ code_id }}'))()</code>
        </div>
        <button class="btn" onclick="copyLoadstring()" style="background: #27ae60;">ğŸ“‹ Copy Loadstring</button>
    </div>
    
    <a href="/" class="btn">ğŸ  Go to balls.lol Homepage</a>
    
    <div style="margin-top: 40px; font-size: 0.9em; opacity: 0.7;">
        <p>Want to protect your own code?</p>
        <p>Visit <strong>balls.lol</strong> for free code protection with IP-based access control!</p>
    </div>
</div>

<script>
// Display current time
function updateTime() {
    document.getElementById('currentTime').textContent = new Date().toLocaleString();
}
updateTime();

// Copy loadstring function
function copyLoadstring() {
    const loadstring = `loadstring(game:HttpGet('{{ request.url_root }}api/loadstring/{{ code_id }}'))()`;
    navigator.clipboard.writeText(loadstring).then(() => {
        alert('Loadstring copied to clipboard!');
    }).catch(() => {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = loadstring;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        alert('Loadstring copied to clipboard!');
    });
}

// Add blinking effect to warning icon
document.addEventListener('DOMContentLoaded', function() {
    let warningIcon = document.querySelector('.warning-icon');
    setInterval(() => {
        warningIcon.style.opacity = warningIcon.style.opacity == '0.5' ? '1' : '0.5';
    }, 1500);
});
</script>
{% endblock %}
